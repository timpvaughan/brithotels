{"version":3,"file":"wds-url-crawler-report.js","sources":["includes/assets/js/es6/wds-url-crawler-report.js"],"sourcesContent":["(function ($) {\n\t/**\n\t * The class responsible for interaction with the crawl report UI. Changes to the markup should ideally affect this class only.\n\t */\n\tclass URLCrawlerReportUI {\n\t\tstatic get_open_section() {\n\t\t\treturn $('.sui-accordion-item--open');\n\t\t}\n\n\t\tstatic get_open_section_type() {\n\t\t\treturn URLCrawlerReportUI.get_open_section().data('type');\n\t\t}\n\n\t\tstatic is_ignored_tab_open() {\n\t\t\treturn URLCrawlerReportUI.get_open_section().find('[data-tabs] .active').is('.ignored');\n\t\t}\n\n\t\tstatic replace_report_markup(new_markup) {\n\t\t\t$('.wds-crawl-results-report').replaceWith(new_markup);\n\t\t}\n\n\t\tstatic replace_summary_markup(new_markup) {\n\t\t\t$('#wds-crawl-summary-container').html(new_markup);\n\t\t}\n\n\t\tstatic get_issue_id($context) {\n\t\t\treturn $context.closest('[data-issue-id]').data('issueId');\n\t\t}\n\n\t\tstatic get_path($context) {\n\t\t\treturn $context.closest('[data-path]').data('path');\n\t\t}\n\n\t\tstatic get_redirect_path($context) {\n\t\t\treturn $context.closest('[data-redirect-path]').data('redirectPath');\n\t\t}\n\n\t\tstatic get_issue_ids($context) {\n\t\t\tlet $group_container = $context.closest('.wds-crawl-issues-table'),\n\t\t\t\t$issue_container = $group_container.length\n\t\t\t\t\t? $group_container\n\t\t\t\t\t: $context.closest('.tab_url_crawler'),\n\t\t\t\t$issues = $issue_container.find('[data-issue-id]'),\n\t\t\t\tissue_ids = [];\n\n\t\t\t$issues.each(function (index, issue) {\n\t\t\t\tissue_ids.push($(issue).data('issueId'));\n\t\t\t});\n\n\t\t\treturn issue_ids;\n\t\t}\n\n\t\tstatic block_ui($target_el) {\n\t\t\tif ($target_el.closest('.wds-links-dropdown').length) {\n\t\t\t\t$target_el = $target_el.closest('.wds-links-dropdown').find('.sui-dropdown-anchor');\n\t\t\t}\n\n\t\t\tif ($target_el.is('.sui-button-onload')) {\n\t\t\t\t// Already blocked\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$target_el.addClass('sui-button-onload');\n\t\t\t$('.wds-disabled-during-request').prop('disabled', true);\n\t\t}\n\n\t\tstatic unblock_ui() {\n\t\t\t$('.wds-disabled-during-request').prop('disabled', false);\n\t\t\t$('.sui-button-onload').removeClass('sui-button-onload');\n\t\t}\n\n\t\tstatic show_sitemap_message($message, $context) {\n\t\t\tlet $tabs = $context.closest('.sui-tabs');\n\t\t\tif (!$tabs.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$tabs.prev('.wds-notice').remove();\n\t\t\t$message.insertBefore($tabs);\n\t\t}\n\n\t\tstatic get_sitemap_path($context) {\n\t\t\treturn $context.closest('[data-issue-id]').data('path');\n\t\t}\n\n\t\tstatic get_sitemap_paths($context) {\n\t\t\tlet $container = $context.closest('.wds-crawl-issues-table'),\n\t\t\t\t$issues = $container.find('[data-issue-id]'),\n\t\t\t\tpaths = [];\n\n\t\t\t$issues.each(function (index, issue) {\n\t\t\t\tpaths.push($(issue).data('path'));\n\t\t\t});\n\n\t\t\treturn paths;\n\t\t}\n\n\t\tstatic get_dialog($context) {\n\t\t\treturn $context.closest('.sui-modal');\n\t\t}\n\n\t\tstatic get_link_dropdown_anchor($context) {\n\t\t\treturn $context.closest('.wds-links-dropdown').find('.sui-dropdown-anchor');\n\t\t}\n\n\t\tstatic get_redirect_data($context) {\n\t\t\tlet $modal = URLCrawlerReportUI.get_dialog($context),\n\t\t\t\t$fields = $modal.find(\"input\"),\n\t\t\t\tdata = {};\n\n\t\t\t$fields.each(function () {\n\t\t\t\tlet $me = $(this);\n\t\t\t\tdata[$me.attr(\"name\")] = $me.val();\n\t\t\t});\n\n\t\t\treturn data;\n\t\t}\n\n\t\tstatic open_dialog(dialog_id, focus_after) {\n\t\t\tSUI.openModal(dialog_id, focus_after);\n\t\t}\n\n\t\tstatic close_dialog() {\n\t\t\tSUI.closeModal();\n\t\t}\n\n\t\tstatic replace_dialog_markup(dialog, markup) {\n\t\t\tlet dialog_id = '#' + dialog;\n\n\t\t\t$(dialog_id).replaceWith(\n\t\t\t\t$(markup).find(dialog_id)\n\t\t\t);\n\t\t}\n\n\t\tstatic validate_dialog(dialog_id) {\n\t\t\tlet is_valid = true;\n\t\t\t$('.sui-form-field', $('#' + dialog_id)).each(function () {\n\t\t\t\tlet $form_field = $(this),\n\t\t\t\t\t$input = $('input', $form_field);\n\n\t\t\t\tif (!$input.val()) {\n\t\t\t\t\tis_valid = false;\n\t\t\t\t\t$form_field.addClass('sui-form-field-error');\n\n\t\t\t\t\t$input.on('focus keydown', function () {\n\t\t\t\t\t\t$(this).closest('.sui-form-field-error').removeClass('sui-form-field-error');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn is_valid;\n\t\t}\n\t}\n\n\t/**\n\t * The class containing the business logic for the crawl report.\n\t *\n\t * @see URLCrawlerReportUI\n\t */\n\tclass URLCrawlerReport {\n\t\tinit() {\n\t\t\t$(document)\n\t\t\t\t.on('click', '[href=\"#ignore\"]', (e) => this.handle_ignore_single_action(e))\n\t\t\t\t.on('click', '.wds-crawl-issues-table .wds-ignore-all', (e) => this.handle_ignore_group_action(e))\n\t\t\t\t.on('click', '.sui-box-header .wds-ignore-all', (e) => this.handle_ignore_all_action(e))\n\n\t\t\t\t.on('click', '.wds-ignored-items-table .wds-unignore', (e) => this.handle_restore_single_action(e))\n\n\t\t\t\t.on('click', '[href=\"#add-to-sitemap\"]', (e) => this.handle_add_single_to_sitemap_action(e))\n\t\t\t\t.on('click', '.wds-crawl-issues-table .wds-add-all-to-sitemap', (e) => this.handle_add_all_to_sitemap_action(e))\n\n\t\t\t\t.on('click', '[href=\"#occurrences\"]', (e) => this.handle_open_occurrences_dialog_action(e))\n\t\t\t\t.on('click', '[href=\"#redirect\"]', (e) => this.handle_open_redirect_dialog_action(e))\n\t\t\t\t.on('click', '.wds-submit-redirect', (e) => this.handle_save_redirect_action(e))\n\t\t\t\t.on('click', '.wds-crawl-results-report [data-modal-close]', () => URLCrawlerReportUI.close_dialog())\n\t\t\t;\n\n\t\t\tthis.templates = {\n\t\t\t\tredirect_dialog: Wds.tpl_compile(Wds.template('url_crawler', 'redirect_dialog')),\n\t\t\t\toccurrences_dialog: Wds.tpl_compile(Wds.template('url_crawler', 'occurrences_dialog')),\n\t\t\t\tissue_occurrences: Wds.tpl_compile(Wds.template('url_crawler', 'issue_occurrences'))\n\t\t\t};\n\t\t\tthis.occurrences_request = new $.Deferred();\n\t\t}\n\n\t\tpost(action, data) {\n\t\t\tdata = $.extend({\n\t\t\t\taction: action,\n\t\t\t\t_wds_nonce: _wds_sitemaps.nonce\n\t\t\t}, data);\n\n\t\t\treturn $.post(ajaxurl, data);\n\t\t}\n\n\t\treload_report() {\n\t\t\treturn this.post('wds-get-sitemap-report', {\n\t\t\t\topen_type: URLCrawlerReportUI.get_open_section_type(),\n\t\t\t\tignored_tab_open: URLCrawlerReportUI.is_ignored_tab_open() ? 1 : 0\n\t\t\t}).done(\n\t\t\t\t/**\n\t\t\t\t * @param {{summary_markup:string, markup:string}} data\n\t\t\t\t */\n\t\t\t\t(data) => {\n\t\t\t\t\tdata = (data || {});\n\t\t\t\t\tif (data.success && data.markup) {\n\t\t\t\t\t\tURLCrawlerReportUI.replace_report_markup(data.markup);\n\t\t\t\t\t\tURLCrawlerReportUI.replace_summary_markup(data.summary_markup);\n\t\t\t\t\t\tURLCrawlerReportUI.unblock_ui();\n\n\t\t\t\t\t\t$(this).trigger('wds_url_crawler_report:reloaded');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tchange_issue_status(issue_id, action) {\n\t\t\treturn this.post(action, {issue_id: issue_id})\n\t\t\t\t.done((data) => {\n\t\t\t\t\tlet status = parseInt(\n\t\t\t\t\t\t(data || {}).status || '0',\n\t\t\t\t\t\t10\n\t\t\t\t\t);\n\t\t\t\t\tif (status > 0) {\n\t\t\t\t\t\tthis.reload_report();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tignore_issue(issue_id) {\n\t\t\treturn this.change_issue_status(issue_id, 'wds-service-ignore');\n\t\t}\n\n\t\trestore_issue(issue_id) {\n\t\t\treturn this.change_issue_status(issue_id, 'wds-service-unignore');\n\t\t}\n\n\t\thandle_ignore_single_action(e) {\n\t\t\te.preventDefault();\n\n\t\t\tlet $target = $(e.target),\n\t\t\t\tissue_id = URLCrawlerReportUI.get_issue_id($target);\n\n\t\t\tURLCrawlerReportUI.block_ui($target);\n\n\t\t\treturn this.ignore_issue(issue_id);\n\t\t}\n\n\t\thandle_restore_single_action(e) {\n\t\t\te.preventDefault();\n\n\t\t\tlet $target = $(e.target),\n\t\t\t\tissue_id = URLCrawlerReportUI.get_issue_id($target);\n\n\t\t\tURLCrawlerReportUI.block_ui($target);\n\n\t\t\treturn this.restore_issue(issue_id);\n\t\t}\n\n\t\thandle_ignore_group_action(e) {\n\t\t\te.preventDefault();\n\n\t\t\tlet $target = $(e.target),\n\t\t\t\tissue_ids = URLCrawlerReportUI.get_issue_ids($target);\n\n\t\t\tURLCrawlerReportUI.block_ui($target);\n\n\t\t\treturn this.ignore_issue(issue_ids);\n\t\t}\n\n\t\thandle_ignore_all_action(e) {\n\t\t\te.preventDefault();\n\n\t\t\tlet $target = $(e.target),\n\t\t\t\tissue_ids = URLCrawlerReportUI.get_issue_ids($target);\n\n\t\t\tURLCrawlerReportUI.block_ui($target);\n\n\t\t\treturn this.ignore_issue(issue_ids);\n\t\t}\n\n\t\tadd_to_sitemap(path, $context) {\n\t\t\treturn this.post('wds-sitemap-add_extra', {path: path})\n\t\t\t\t.done(\n\t\t\t\t\t/**\n\t\t\t\t\t * @param {{status:string, add_all_message:string}} data\n\t\t\t\t\t */\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\tdata = (data || {});\n\t\t\t\t\t\tlet status = parseInt(\n\t\t\t\t\t\t\tdata.status || '0',\n\t\t\t\t\t\t\t10\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (status > 0) {\n\t\t\t\t\t\t\tlet $message = $(data.add_all_message || '');\n\n\t\t\t\t\t\t\tURLCrawlerReportUI.show_sitemap_message($message, $context);\n\t\t\t\t\t\t\tURLCrawlerReportUI.unblock_ui();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t}\n\n\t\thandle_add_single_to_sitemap_action(e) {\n\t\t\te.preventDefault();\n\n\t\t\tlet $target = $(e.target),\n\t\t\t\tpath = URLCrawlerReportUI.get_sitemap_path($target);\n\n\t\t\tURLCrawlerReportUI.block_ui($target);\n\n\t\t\treturn this.add_to_sitemap(path, $target);\n\t\t}\n\n\t\thandle_add_all_to_sitemap_action(e) {\n\t\t\te.preventDefault();\n\n\t\t\tlet $target = $(e.target),\n\t\t\t\tpath = URLCrawlerReportUI.get_sitemap_paths($target);\n\n\t\t\tURLCrawlerReportUI.block_ui($target);\n\n\t\t\treturn this.add_to_sitemap(path, $target);\n\t\t}\n\n\t\tload_issue_occurrences(issue_id) {\n\t\t\tlet deferred = new $.Deferred();\n\n\t\t\tthis.post('wds-load-issue-occurrences', {\n\t\t\t\tissue_id: issue_id\n\t\t\t}).done((response) => {\n\t\t\t\tif (deferred.state() !== 'pending') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet success = (response || {}).success || false,\n\t\t\t\t\tdata = (response || {}).data || {};\n\n\t\t\t\tif (success && data.occurrences) {\n\t\t\t\t\tdeferred.resolve(data.occurrences);\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.reject();\n\t\t\t\t}\n\t\t\t}).fail(deferred.reject);\n\n\t\t\treturn deferred;\n\t\t}\n\n\t\thandle_open_occurrences_dialog_action(e) {\n\t\t\te.preventDefault();\n\t\t\t// Cancel the previous request if it's still in progress\n\t\t\tif (this.occurrences_request.state() === 'pending') {\n\t\t\t\tthis.occurrences_request.reject();\n\t\t\t}\n\n\t\t\tlet $target = $(e.target),\n\t\t\t\tissue_id = URLCrawlerReportUI.get_issue_id($target),\n\t\t\t\tpath = URLCrawlerReportUI.get_path($target),\n\t\t\t\tmarkup = this.templates.occurrences_dialog({\n\t\t\t\t\t'issue_id': issue_id,\n\t\t\t\t\t'issue_path': path,\n\t\t\t\t\t'issue_occurrences': ''\n\t\t\t\t});\n\n\t\t\tURLCrawlerReportUI.replace_dialog_markup('wds-issue-occurrences', markup);\n\t\t\tURLCrawlerReportUI.open_dialog(\n\t\t\t\t'wds-issue-occurrences',\n\t\t\t\tURLCrawlerReportUI.get_link_dropdown_anchor($(e.target)).get(0)\n\t\t\t);\n\t\t\tthis.occurrences_request = this.load_issue_occurrences(issue_id)\n\t\t\t\t.done((occurrences) => {\n\t\t\t\t\tlet occurrences_markup = this.templates.issue_occurrences({\n\t\t\t\t\t\toccurrences: occurrences\n\t\t\t\t\t});\n\n\t\t\t\t\t$('#wds-issue-occurrences').find('.wds-issue-occurrences').html(occurrences_markup);\n\t\t\t\t});\n\t\t}\n\n\t\thandle_open_redirect_dialog_action(e) {\n\t\t\te.preventDefault();\n\n\t\t\tlet $target = $(e.target),\n\t\t\t\tissue_id = URLCrawlerReportUI.get_issue_id($target),\n\t\t\t\tpath = URLCrawlerReportUI.get_path($target),\n\t\t\t\tredirect_path = URLCrawlerReportUI.get_redirect_path($target),\n\t\t\t\tmarkup = this.templates.redirect_dialog({\n\t\t\t\t\t'issue_id': issue_id,\n\t\t\t\t\t'issue_path': path,\n\t\t\t\t\t'issue_redirect_path': redirect_path\n\t\t\t\t});\n\n\t\t\tURLCrawlerReportUI.replace_dialog_markup('wds-issue-redirect', markup);\n\t\t\tURLCrawlerReportUI.open_dialog(\n\t\t\t\t'wds-issue-redirect',\n\t\t\t\tURLCrawlerReportUI.get_link_dropdown_anchor($(e.target)).get(0)\n\t\t\t);\n\t\t}\n\n\t\thandle_save_redirect_action(e) {\n\t\t\te.preventDefault();\n\n\t\t\tlet is_valid = URLCrawlerReportUI.validate_dialog('wds-issue-redirect');\n\t\t\tif (!is_valid) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet $target = $(e.target),\n\t\t\t\tissue_id = URLCrawlerReportUI.get_issue_id($target),\n\t\t\t\tredirect_data = URLCrawlerReportUI.get_redirect_data($target);\n\n\t\t\tURLCrawlerReportUI.block_ui($target);\n\n\t\t\treturn this.post('wds-service-redirect', redirect_data)\n\t\t\t\t.always(() => {\n\t\t\t\t\tURLCrawlerReportUI.close_dialog();\n\t\t\t\t\tthis.ignore_issue(issue_id);\n\t\t\t\t});\n\t\t}\n\t}\n\n\twindow.Wds = window.Wds || {};\n\twindow.Wds.URLCrawlerReport = new URLCrawlerReport();\n})(jQuery);\n"],"names":["$","URLCrawlerReportUI","get_open_section","data","find","is","new_markup","replaceWith","html","$context","closest","$group_container","$issue_container","length","$issues","issue_ids","each","index","issue","push","$target_el","addClass","prop","removeClass","$message","$tabs","prev","remove","insertBefore","$container","paths","$modal","get_dialog","$fields","$me","attr","val","dialog_id","focus_after","SUI","openModal","closeModal","dialog","markup","is_valid","$form_field","$input","on","URLCrawlerReport","document","e","handle_ignore_single_action","handle_ignore_group_action","handle_ignore_all_action","handle_restore_single_action","handle_add_single_to_sitemap_action","handle_add_all_to_sitemap_action","handle_open_occurrences_dialog_action","handle_open_redirect_dialog_action","handle_save_redirect_action","close_dialog","templates","redirect_dialog","Wds","tpl_compile","template","occurrences_dialog","issue_occurrences","occurrences_request","Deferred","action","extend","_wds_nonce","_wds_sitemaps","nonce","post","ajaxurl","open_type","get_open_section_type","ignored_tab_open","is_ignored_tab_open","done","success","replace_report_markup","replace_summary_markup","summary_markup","unblock_ui","trigger","issue_id","status","parseInt","reload_report","change_issue_status","preventDefault","$target","target","get_issue_id","block_ui","ignore_issue","restore_issue","get_issue_ids","path","add_all_message","show_sitemap_message","get_sitemap_path","add_to_sitemap","get_sitemap_paths","deferred","response","state","occurrences","resolve","reject","fail","get_path","replace_dialog_markup","open_dialog","get_link_dropdown_anchor","get","load_issue_occurrences","occurrences_markup","redirect_path","get_redirect_path","validate_dialog","redirect_data","get_redirect_data","always","window","jQuery"],"mappings":"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"}